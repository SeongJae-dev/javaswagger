<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="timeline">
	<!-- <select id="getTimeline" resultType="postVo">
		select*from post order by post_time desc
	</select>  -->
	<select id="getTimeline" resultType="postVo">
		select * from post where post_no in (select post_no from (select rownum, post_no from (select PP.post_no, count(*) like_cnt from likes right outer join (select post_no from post where user_id in (select user_id from follow where follower_id = #{user_ID})) PP on PP.post_no = likes.post_no group by PP.post_no order by like_cnt desc)))
	</select> 
	
	<select id="searchByHash" resultType="postVo">
		select * from post where post_content like '%' || #{keyword} || '%'
	</select>
	
</mapper>